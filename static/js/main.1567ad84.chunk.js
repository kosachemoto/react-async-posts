(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(t,e,n){"use strict";var a=n(23);n.d(e,"RESET_STATE",function(){return a.a}),n.d(e,"resetState",function(){return a.b});var r=n(24);n.d(e,"REQUEST_POST",function(){return r.a}),n.d(e,"receivePost",function(){return r.b});var c=n(25);n.d(e,"REQUEST_USER",function(){return c.a}),n.d(e,"receiveUser",function(){return c.b});var o=n(20);n.o(o,"receiveAuthor")&&n.d(e,"receiveAuthor",function(){return o.receiveAuthor})},,,,,,,,,function(t,e,n){"use strict";var a=n(16),r=n.n(a),c="https://jsonplaceholder.typicode.com",o={posts:[],loaded:!1,post:function(t){return new Promise(function(e,n){r()("".concat(c,"/posts/").concat(t)).then(function(t){t.ok?e(t.json()):n(new Error("Request status: ".concat(t.status," :(")))})})},user:function(t){return new Promise(function(e,n){r()("".concat(c,"/users/").concat(t)).then(function(t){t.ok?e(t.json()):n(new Error("Request status: ".concat(t.status," :(")))})})}};n.d(e,"a",function(){return o})},,,,,,function(t,e,n){"use strict";var a=n(21);n.o(a,"receiveAuthor")&&n.d(e,"receiveAuthor",function(){return a.receiveAuthor})},function(t,e){},,function(t,e,n){"use strict";var a={POSTS:"RESET_STATE_POSTS"};function r(t){return{type:a[t]}}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";var a=n(14),r={START:"REQUEST_POST_START",FINISH:"REQUEST_POST_FINISH",ERROR:"REQUEST_POST_ERROR"};function c(t,e){return{type:r[t],payload:e}}function o(t){return function(e){e(c("START")),a.a.post(t).then(function(t){e(c("FINISH",{post:t}))}).catch(function(t){e(c("ERROR",{error:t}))})}}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o})},function(t,e,n){"use strict";var a=n(14),r={START:"REQUEST_USER_START",FINISH:"REQUEST_USER_FINISH",ERROR:"REQUEST_USER_ERROR"};function c(t,e){return{type:r[t],payload:e}}function o(t){return function(e){e(c("START")),a.a.user(t).then(function(t){e(c("FINISH",{user:t}))}).catch(function(t){e(c("ERROR",{error:t}))})}}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o})},,,,,function(t,e,n){t.exports=n.p+"static/media/plus.066f05cc.svg"},,function(t,e,n){t.exports=n(71)},,,,,function(t,e,n){},,,,,,,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,,,,,,function(t,e,n){},,function(t,e,n){},,function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var a=n(26),r=n(0),c=n.n(r),o=n(27),s=n.n(o);n(37),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(8),i=n(5),l=n(11),E=n(7),f=Object(u.c)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.REQUEST_POST.FINISH:var n=e.payload.post;return Object(E.a)({},t,Object(l.a)({},n.id,Object(E.a)({},n)));case i.REQUEST_POST.ERROR:return Object(E.a)({},t);case i.REQUEST_POST.START:default:return Object(E.a)({},t)}},users:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.REQUEST_USER.FINISH:var n=e.payload.user;return Object(E.a)({},t,Object(l.a)({},n.id,Object(E.a)({},n)));case i.REQUEST_USER.ERROR:return Object(E.a)({},t);case i.REQUEST_USER.START:default:return Object(E.a)({},t)}}}),d=n(29),m=n(12),p=(n(44),Object(m.b)(function(t,e){var n=e.postId,a=t.posts[n]?t.posts[n]:void 0,r=a?a.userId:void 0;return{post:a,author:t.users[r]?t.users[r]:void 0}},function(t){return{loadPost:function(e){return t(Object(i.receivePost)(e))},loadUser:function(e){return t(Object(i.receiveUser)(e))}}})(function(t){var e=t.className,n=t.postId,a=t.post,o=t.author,s=t.loadPost,u=t.loadUser;return Object(r.useEffect)(function(){n&&!a&&s(n),a&&!o&&u(a.userId)}),n?c.a.createElement("div",{className:"post-detail ".concat(e)},c.a.createElement(h,{post:a,author:o}),c.a.createElement(T,null)):c.a.createElement("div",{className:"post-detail ".concat(e)},"Did not selected any post...")})),v=(n(46),function(t){var e=Object.keys(t);if(!e.length)return 1;var n=e.findIndex(function(t,e){return+t!==e+1});return n<0?e.length+1:n+1}),S=Object(m.b)(function(t,e){return Object(E.a)({posts:t.posts},e)},function(t){return{loadNext:function(e){return t(Object(i.receivePost)(e))},loadAuthor:function(){return t(Object(i.receiveAuthor)())},resetPosts:function(){return t(Object(i.resetState)("POSTS"))}}})(function(t){var e=t.posts,n=t.loadNext,a=t.className,r=t.resetPosts,o=v(e);return c.a.createElement("div",{className:"post-list ".concat(a)},c.a.createElement(I,{loadNext:function(){n(o)},nextPostId:v(e)}),c.a.createElement(U,{resetPosts:r}),Object.values(e).map(function(t,e){return c.a.createElement(_,Object.assign({key:e},t))}))}),R=(n(48),function(t){var e=t.match.params.postId;return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"app__title"},"Posts app"),c.a.createElement(S,{className:"app__post-list"}),c.a.createElement(p,{className:"app__post-detail",postId:e||""}))}),O=(n(50),function(t){var e=t.className,n=t.author;return c.a.createElement("div",{className:"author ".concat(e)},c.a.createElement("span",{className:"author-name"},n.name)," / ",c.a.createElement("span",{className:"author-email"},n.email))}),T=(n(52),n(54),function(){return c.a.createElement("div",{className:"comment-list"})}),h=(n(56),function(t){var e=t.post,n=void 0===e?{}:e,a=t.author,r=void 0===a?{}:a;return c.a.createElement("div",{className:"post"},c.a.createElement("h3",{className:"post-title"},n.title),c.a.createElement("p",{className:"post-body"},n.body),c.a.createElement(O,{className:"post_author",author:r}))}),b=n(75),_=(n(58),function(t){var e=t.id,n=t.title,a=t.body;return c.a.createElement(b.a,{exact:!0,to:"/posts/".concat(e),className:"post-preview"},c.a.createElement("h3",{className:"post-preview-title"},n),c.a.createElement("p",{className:"post-preview-body"},a))}),N=(n(65),n(30)),j=n.n(N),I=function(t){var e=t.loadNext;return c.a.createElement("div",{className:"more-button",onClick:e},c.a.createElement("div",{className:"more-button__title"},"Load More"),c.a.createElement("img",{className:"more-button__img",src:j.a,alt:"Add more"}))},U=(n(67),function(t){var e=t.resetPosts;return c.a.createElement("div",{className:"reset-button",onClick:e},c.a.createElement("div",{className:"reset-button__title"},"Reset Local Storage"))}),P=n(73),w=n(72),y=n(74),g=(n(69),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d),A=Object(d.createLogger)(),Q=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),x=Object(u.e)(function(t,e){switch(e.type){case i.RESET_STATE.POSTS:t=void 0}return f(t,e)},Q,g(Object(u.a)(a.a,A)));x.subscribe(function(){!function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){}}(x.getState())}),s.a.render(c.a.createElement(function(t){var e=t.store;return c.a.createElement(m.a,{store:e},c.a.createElement(P.a,{basename:"/react-async-posts"},c.a.createElement(c.a.Fragment,null,c.a.createElement(w.a,{exact:!0,path:"/",render:function(){return c.a.createElement(y.a,{to:"/posts"})}}),c.a.createElement(w.a,{exact:!0,path:"/posts",component:R}),c.a.createElement(w.a,{exact:!0,path:"/posts/:postId",component:R}))))},{store:x}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[32,2,1]]]);
//# sourceMappingURL=main.1567ad84.chunk.js.map